function urlCleanup(){if("undefined"!=typeof history.pushState){var e={Title:document.title,Url:window.parent.location.pathname};history.pushState(e,e.Title,e.Url)}else window.parent.location=window.parent.location.pathname}function navOptCleanup(){var e=nav.querySelectorAll("a");for(i=0;i<e.length;i++)e[i].classList.remove("active")}function navOptActive(e){var t=document.querySelector("#nav-"+e);navOptCleanup(),t?t.classList.add("active"):window.location=rootUrl}function insertGame(e){function t(){var e=gameContainer;e.innerHTML=a.responseText}var a=new XMLHttpRequest;a.open("GET",gamesUrl+e+".html",!0),a.onreadystatechange=function(e){4==a.readyState&&200==a.status&&(t(),afterAjaxLoaded())},a.send(null)}function clearGames(){gameContainer.innerHTML=""}function navFocusPrev(){if(nav.classList.contains("active")){var e=6,t=nav.querySelector("ul"),a=t.querySelectorAll("li")[e-1],n=a.querySelector("a"),o=(t.querySelectorAll("a"),t.querySelector("a.focus")),c=o.parentElement.previousElementSibling;c?(c.querySelector("a").classList.add("focus"),o.classList.remove("focus")):(n.classList.add("focus"),o.classList.remove("focus"))}}function navFocusNext(){if(nav.classList.contains("active")){var e=nav.querySelector("ul"),t=e.querySelectorAll("li")[0],a=t.querySelector("a"),n=(e.querySelectorAll("a"),e.querySelector("a.focus")),o=n.parentElement.nextElementSibling;o?(o.querySelector("a").classList.add("focus"),n.classList.remove("focus")):(a.classList.add("focus"),n.classList.remove("focus"))}}function anchorActive(){if(nav.classList.contains("active")){var e=nav.querySelector("ul"),t=e.querySelector("a.focus");t.click(),t.classList.add("active")}}function afterAjaxLoaded(){!function(){var e=document.querySelector(".cheatGroupHolder"),t=e.querySelectorAll("a[data-cheatgroup]"),a=e.querySelector("a[data-cheatall]");for(i=0;i<t.length;i++)t[i].addEventListener("click",function(){var e=this.parentElement,t=e.parentElement,a=t.querySelectorAll(".cheatGroupSubHolder");for(j=0;j<a.length;j++)a[j].classList.add("hide"),a[j].classList.remove("expand");gameContainer.classList.add("cheats"),e.classList.remove("hide"),e.classList.add("expand")});a.addEventListener("click",function(){for(allSubHolders=e.querySelectorAll(".cheatGroupSubHolder"),gameContainer.classList.add("cheats"),j=0;j<allSubHolders.length;j++)allSubHolders[j].classList.remove("hide"),allSubHolders[j].classList.add("expand")}),function e(){var e=document.querySelector("#gamesInfo"),t=document.querySelector("#gamesInfoClose");e.addEventListener("click",function(){var e=this.parentElement,t=e.querySelector("p");t.classList.add("show"),this.classList.add("close")}),t.addEventListener("click",function(){var t=this.parentElement.parentElement;t.classList.remove("show"),e.classList.remove("close")})}(),function(){var e=document.querySelector("#gamesInfoAlt"),t=document.querySelector("#gamesInfoClose"),a=document.querySelector(".gameDesc"),n=a.querySelector("p");e.addEventListener("click",function(){n.classList.add("show"),this.classList.add("close")}),t.addEventListener("click",function(){n.classList.remove("show"),e.classList.remove("close")})}()}()}var rootUrl="../theft/",nav=document.querySelector("nav"),toggle=document.querySelector("#toggle").querySelector("a"),back=document.querySelector("#back").querySelector("a"),logo=document.querySelector("#logo").querySelector("a"),mainContainer=document.querySelector("#mainContainer"),gameContainer=document.querySelector("#gameContainer"),gamesUrl=rootUrl+"games/";!function(){toggle.addEventListener("click",function(){function e(){for(i=0;i<o.length;i++)o[i].classList.remove("focus")}var t=nav.querySelector("ul"),a=t.querySelectorAll("li")[0],n=a.querySelector("a"),o=t.querySelectorAll("a");nav.classList.contains("active")?(e(),nav.classList.remove("active")):(nav.classList.add("active"),t.querySelector("a.active")?(n.classList.remove("focus"),t.querySelector("a.active").classList.add("focus")):(e(),n.classList.add("focus")))})}(),function(){var e=nav.querySelectorAll("a");for(i=0;i<e.length;i++)e[i].addEventListener("click",function(){var e=this.getAttribute("href"),t=e.slice(1),a=t.toString();navOptCleanup(),this.classList.add("active"),mainContainer.classList.add("hide"),gameContainer.classList.add("show"),gameContainer.classList.remove("cheats"),insertGame(a)})}(),function(){function e(){for(i=0;i<n.length;i++)n[i].classList.remove("focus")}var t=nav.querySelectorAll("a"),a=nav.querySelector("ul"),n=a.querySelectorAll("a");for(i=0;i<t.length;i++)t[i].addEventListener("mouseover",function(){e(),this.classList.add("focus")})}(),function(){if(window.location.href.indexOf("#")>-1){var e=window.location.href,t=e.split("#").pop(),a=t.toString();mainContainer.classList.add("hide"),gameContainer.classList.add("show"),navOptActive(a),insertGame(a)}}(),function(){back.addEventListener("click",function(){if(back.hasAttribute("href"));else if(window.location.href.indexOf("#")>-1)if(gameContainer.classList.contains("cheats")){var e=document.querySelectorAll(".cheatGroupSubHolder");for(i=0;i<e.length;i++)e[i].classList.remove("hide"),e[i].classList.remove("expand");gameContainer.classList.remove("cheats")}else mainContainer.classList.remove("hide"),gameContainer.classList.remove("show"),urlCleanup(),navOptCleanup(),clearGames();else toggle.click()})}(),function(){logo.addEventListener("click",function(){back.hasAttribute("href")||(mainContainer.classList.remove("hide"),gameContainer.classList.remove("show"),gameContainer.classList.remove("cheats"),urlCleanup(),navOptCleanup(),clearGames())})}();var key={};key.detect=function(){console.log("key detection active"),document.onkeydown=function(e){console.log("keyCode = "+e.keyCode)}},key.backspace=8,key.enter=13,key.tab=9,key.home=36,key.arrow={},key.arrow.up=38,key.arrow.down=40,key.arrow.left=37,key.arrow.right=39,key.alpha={},key.alpha.w=87,key.alpha.s=83,key.alpha.a=65,key.alpha.d=68,key.alpha.t=84,key.alpha.f=70,key.alpha.i=73,document.onkeydown=function(e){switch(e.keyCode||e.which){case key.backspace:back.click();break;case key.alpha.t:case key.tab:toggle.click();break;case key.alpha.w:case key.arrow.up:navFocusPrev();break;case key.alpha.s:case key.arrow.down:navFocusNext();break;case key.enter:case key.alpha.f:anchorActive();break;case key.home:logo.click();break;case key.alpha.i:document.querySelector("#about").click()}},function(){var e=document.querySelector("#about"),t=document.querySelector("#aboutClose");e.addEventListener("click",function(){var e=this.parentElement,t=e.querySelector("p");t.classList.add("show"),this.classList.add("close")}),t.addEventListener("click",function(){var t=this.parentElement.parentElement;t.classList.remove("show"),e.classList.remove("close")})}(),function(){var e=mainContainer.querySelector(".gameList"),t=e.querySelectorAll("a.game");for(i=0;i<t.length;i++)t[i].addEventListener("click",function(){var e=this.getAttribute("href").slice(1),t=e.toString();mainContainer.classList.add("hide"),gameContainer.classList.add("show"),navOptActive(t),insertGame(t)})}(),function(){var e="Theft Console";console.log(e)}();